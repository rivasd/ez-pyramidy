(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(62)},31:function(e,t,a){},33:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(22),s=a.n(i),o=(a(31),a(6)),l=a(7),c=a(9),u=a(8),d=a(10),p=a(2),m=(a(33),a(23)),h=a.n(m);var y=function(e,t){var a=document.createElement("div");a.classList.add("overlay"),a.innerHTML='<p class="title">'+e.fullName+"</p>",a.id="pyramidy-target";var n,r=document.createElement("span");r.classList.add("pyramidy-timer"),document.getElementById("app-container").appendChild(a),document.getElementById("app-container").appendChild(r);var i=60;function s(e){var t=[{type:"html-keyboard-response",stimulus:"Vous aurez 30 secondes pour faire deviner un maximum de mots. Si vous devez deviner, d\xe9tournez le regard maintenant. Appuyez sur une touche pour commencer!",on_finish:function(e){r.textContent=i.toString(),n=setInterval(function(){i--,r.textContent=i.toString(),i<1&&(jsPsych.endExperiment(),clearInterval(n))},1e3)}}];return e.words.forEach(function(e,a){t.push({type:"html-button-response",stimulus:"<p>"+e+"</p>",choices:["correct","passe"]})}),t}a.addEventListener("click",function t(){a.removeEventListener("click",t),jsPsych.init({display_element:"pyramidy-target",timeline:s(e),on_finish:function(e){var t=e.select("button_pressed").values.reduce(function(e,t){return e+parseInt(t,10)===0?1:0},0);a.innerHTML="<p>score: "+t+"</p>",setTimeout(function(){a.remove(),r.remove()},2e3)}})})},f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).jsPsychTarget=r.a.createRef(),a.play=a.play.bind(Object(p.a)(Object(p.a)(a))),a.state={disabled:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"play",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({disabled:!0}),y(this.props.category,this.jsPsychTarget.current)}},{key:"render",value:function(){var e=h()("pyramidy-categorie",{"pyramidy-categorie-disabled":this.state.disabled,"pyramidy-categorie-playing":this.props.playing});return r.a.createElement("div",{id:"pyramidy-categorie-"+this.props.order,className:e,ref:this.jsPsychTarget,style:this.props.style,onClick:this.play},r.a.createElement("span",null,this.props.displayName))}}]),t}(n.Component);f.defaultProps={disabled:!1,playing:!1,displayName:"None",fullName:"None"};var v=f,g=a(24),b=a.n(g),E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).mainFrame=r.a.createRef(),a.state={categories:a.props.categories},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"findHeigth",value:function(e){var t=b.a.parse("1/2 * x^2 + 1/2 * x - "+e+" = 0");return Math.ceil(t.solveFor("x")[1].valueOf())}},{key:"getGridCss",value:function(){var e=this.findHeigth(this.state.categories.length),t={rows:e,cols:2*e};return{gridTemplateColumns:((100/t.cols).toString()+"% ").repeat(t.cols),gridTemplateRows:((100/t.rows).toString()+"% ").repeat(t.rows)}}},{key:"findCutoffs",value:function(e){for(var t=[],a=0;a<e;a++)0===t.length?t.push(1):t.push(t[t.length-1]+a);return t}},{key:"calculateElemsGridCss",value:function(e){var t=this.findHeigth(this.state.categories.length),a=this.findCutoffs(t),n=[];return a.forEach(function(a,r){for(var i=t-r,s=0;s<r+1&&!(a+s>e.length);s++)n.push({gridColumnStart:i+2*s,gridColumnEnd:"span 2",gridRowStart:r+1})}),n}},{key:"render",value:function(){var e=this.calculateElemsGridCss(this.props.categories);return r.a.createElement("div",{className:"pyramidy-main",style:this.getGridCss()},this.state.categories.map(function(t,a){return r.a.createElement(v,{style:e[a],key:a,order:a,displayName:t.displayName,fullName:t.fullName,category:t})}))}}]),t}(n.Component),j=a(25),w=a.n(j),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).input=r.a.createRef(),a.loadData=a.loadData.bind(Object(p.a)(Object(p.a)(a))),a.state={data:null},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"loadData",value:function(e){e.preventDefault();var t=this.input.current.files[0],a=new FileReader,n=this;a.onload=function(){var t=a.result;try{var r=w.a.safeLoad(t);n.setState({data:r.categories})}catch(e){alert("Oups! there was a problem with your file, check syntax")}},a.readAsText(t)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App",id:"app-container"},r.a.createElement("div",{id:"pyramidy-selector",style:{display:null===this.state.data?"block":"none"}},r.a.createElement("label",{htmlFor:"source"},"S\xe9lectionnez votre jeu"),r.a.createElement("br",null),r.a.createElement("input",{type:"file",id:"source",name:"source",accept:".txt,.yaml,.yml",ref:this.input,onChange:this.loadData})),null===e.state.data?void 0:r.a.createElement(E,{categories:e.state.data}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement("main",null,r.a.createElement("header",null,r.a.createElement("h3",null,"EZ-Pyramidy"),r.a.createElement("h4",null,"Le syst\xe8me de jeu Pyramide FACILE \xe0 utiliser")),r.a.createElement("section",null,r.a.createElement(O,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,2,1]]]);
//# sourceMappingURL=main.0ee5d6a3.chunk.js.map