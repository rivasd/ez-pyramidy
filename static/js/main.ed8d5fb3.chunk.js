(window["webpackJsonpez-pyramidy"]=window["webpackJsonpez-pyramidy"]||[]).push([[0],{26:function(e,t,a){e.exports=a(61)},31:function(e,t,a){},32:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),s=a.n(i),o=(a(31),a(5)),l=a(6),c=a(9),u=a(8),d=a(7),p=a(10),m=(a(32),a(22)),h=a.n(m),y=a(25);var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,a=document.createElement("div");a.classList.add("overlay"),a.innerHTML='<p class="title">'+e.fullName+"</p>",a.id="pyramidy-target";var n,r=document.createElement("span");r.classList.add("pyramidy-timer"),document.getElementById("app-container").appendChild(a),document.getElementById("app-container").appendChild(r);var i=t;function s(e){var t={type:"html-keyboard-response",stimulus:"<p>Vous aurez 30 secondes pour faire deviner un maximum de mots. Si vous devez deviner, d\xe9tournez le regard maintenant. </p>                         <p> Arbitre, appuyez sur 'S' si bonne reponse, 'A' pour passer </p> <p>Appuyez sur une touche pour commencer!</p>",on_finish:function(e){r.textContent=i.toString(),n=setInterval((function(){i--,r.textContent=i.toString(),i<1&&jsPsych.endExperiment()}),1e3)}},a=Object(y.a)(e.words),s=(a.length,0);return[t,{timeline:[{type:"categorize-html",stimulus:function(){return"<p>"+a[s%a.length]+"</p>"},choices:["a","s"],correct_text:"Bravo!",incorrect_text:"ipelaille...",feedback_duration:250,key_answer:jsPsych.pluginAPI.convertKeyCharacterToKeyCode("s"),on_finish:function(e){e.correct?a.splice(s%a.length,1):s++}}],loop_function:function(){return a.length>0}}]}"max_time"in e&&(i=e.max_time),a.addEventListener("click",(function t(){a.removeEventListener("click",t),jsPsych.init({display_element:"pyramidy-target",timeline:s(e),on_finish:function(e){clearInterval(n),r.textContent="";var t=e.select("correct").values.reduce((function(e,t){return e+(t?1:0)}),0);a.innerHTML="<p>score: "+t.toString()+"</p>",setTimeout((function(){a.remove(),r.remove()}),2e3)}})}))},g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).jsPsychTarget=r.a.createRef(),a.play=a.play.bind(Object(d.a)(a)),a.state={disabled:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"play",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({disabled:!0}),f(this.props.category,this.props.default_time)}},{key:"render",value:function(){var e=h()("pyramidy-categorie",{"pyramidy-categorie-disabled":this.state.disabled,"pyramidy-categorie-playing":this.props.playing});return r.a.createElement("div",{id:"pyramidy-categorie-"+this.props.order,className:e,ref:this.jsPsychTarget,style:this.props.style,onClick:this.play},r.a.createElement("span",null,this.props.displayName))}}]),t}(n.Component);g.defaultProps={disabled:!1,playing:!1,displayName:"None",fullName:"None"};var v=g,b=a(23),E=a.n(b),j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).mainFrame=r.a.createRef(),a.state={categories:e.categories,default_time:e.default_time},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"findHeigth",value:function(e){var t=E.a.parse("1/2 * x^2 + 1/2 * x - "+e+" = 0");return Math.ceil(t.solveFor("x")[1].valueOf())}},{key:"getGridCss",value:function(){var e=this.findHeigth(this.state.categories.length),t={rows:e,cols:2*e};return{gridTemplateColumns:((100/t.cols).toString()+"% ").repeat(t.cols),gridTemplateRows:((100/t.rows).toString()+"% ").repeat(t.rows)}}},{key:"findCutoffs",value:function(e){for(var t=[],a=0;a<e;a++)0===t.length?t.push(1):t.push(t[t.length-1]+a);return t}},{key:"calculateElemsGridCss",value:function(e){var t=this.findHeigth(this.state.categories.length),a=this.findCutoffs(t),n=[];return a.forEach((function(a,r){for(var i=t-r,s=0;s<r+1&&!(a+s>e.length);s++)n.push({gridColumnStart:i+2*s,gridColumnEnd:"span 2",gridRowStart:r+1})})),n}},{key:"render",value:function(){var e=this,t=this.calculateElemsGridCss(this.props.categories);return r.a.createElement("div",{className:"pyramidy-main",style:this.getGridCss()},this.state.categories.map((function(a,n){return r.a.createElement(v,{style:t[n],key:n,order:n,displayName:a.displayName,fullName:a.fullName,category:a,default_time:e.props.default_time})})))}}]),t}(n.Component),k=a(24),w=a.n(k),C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).input=r.a.createRef(),a.loadData=a.loadData.bind(Object(d.a)(a)),a.state={categories:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadData",value:function(e){e.preventDefault();var t=this.input.current.files[0],a=new FileReader,n=this;a.onload=function(){var t=a.result;try{var r=w.a.safeLoad(t),i=60;"max_time"in r&&(i=parseInt(r.max_time)),n.setState({categories:r.categories,default_time:i})}catch(e){alert("Oups! there was a problem with your file, check syntax")}},a.readAsText(t)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App",id:"app-container"},r.a.createElement("div",{id:"pyramidy-selector",style:{display:null===this.state.categories?"block":"none"}},r.a.createElement("label",{htmlFor:"source"},"S\xe9lectionnez votre jeu"),r.a.createElement("br",null),r.a.createElement("input",{type:"file",id:"source",name:"source",accept:".txt,.yaml,.yml",ref:this.input,onChange:this.loadData})),null===e.state.categories?"":r.a.createElement(j,{categories:e.state.categories,default_time:e.state.default_time}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement("main",null,r.a.createElement("header",null,r.a.createElement("h3",null,"EZ-Pyramidy"),r.a.createElement("h4",null,"Le syst\xe8me de jeu Pyramide FACILE \xe0 utiliser")),r.a.createElement("section",null,r.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.ed8d5fb3.chunk.js.map