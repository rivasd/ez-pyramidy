(this["webpackJsonpez-pyramidy"]=this["webpackJsonpez-pyramidy"]||[]).push([[0],{25:function(e,t,n){e.exports=n(60)},30:function(e,t,n){},31:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(20),s=n.n(i),o=(n(30),n(5)),l=n(6),c=n(7),u=n(9),p=n(8),d=(n(31),n(21)),m=n.n(d),y=n(24);var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=document.createElement("div");n.classList.add("overlay"),n.innerHTML='<p class="title">'+e.fullName+"</p>",n.id="pyramidy-target";var a,r=document.createElement("span");r.classList.add("pyramidy-timer"),document.getElementById("app-container").appendChild(n),document.getElementById("app-container").appendChild(r);var i=t;function s(){n.removeEventListener("click",s),jsPsych.init({display_element:"pyramidy-target",timeline:o(e),on_finish:function(e){clearInterval(a),r.textContent="";var t=e.select("button_pressed").values.reduce((function(e,t){return e+(t?1:0)}),0);n.innerHTML="<p>score: "+t.toString()+"</p>",setTimeout((function(){n.remove(),r.remove()}),2e3)}})}function o(e){var n={type:"html-button-response",stimulus:"<p>Vous aurez ".concat(t," secondes pour faire deviner un maximum de mots! \n Si vous devez deviner, d\xe9tournez le regard maintenant. </p>                         <p> Utilisez les boutons, ou sinon ESPACE pour r\xe9ussir et P pour passer</p>"),choices:["D\xe9buter!"],on_finish:function(e){r.textContent=i.toString(),a=setInterval((function(){i--,r.textContent=i.toString(),i<1&&jsPsych.endExperiment()}),1e3)}},s=Object(y.a)(e.words),o=(s.length,0);return[n,{timeline:[{type:"html-button-response",stimulus:function(){return"<p>"+s[o%s.length]+"</p>"},choices:["r\xe9ussi","passe"],correct_text:"Bravo!",incorrect_text:"ipelaille...",feedback_duration:250,response_ends_trial:!0,key_answer:jsPsych.pluginAPI.convertKeyCharacterToKeyCode("s"),on_finish:function(e){var t=e.response||e.button_pressed;0==t?s.splice(o%s.length,1):1==t&&o++},on_load:function(e){var t=jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(e){jsPsych.pluginAPI.compareKeys(e.key," ")?("undefined"!==typeof t&&jsPsych.pluginAPI.cancelKeyboardResponse(t),document.getElementById("jspsych-html-button-response-button-0").click()):jsPsych.pluginAPI.compareKeys(e.key,"p")&&("undefined"!==typeof t&&jsPsych.pluginAPI.cancelKeyboardResponse(t),document.getElementById("jspsych-html-button-response-button-1").click())},valid_responses:[" ","p"],rt_method:"performance",persist:!1,allow_held_key:!1})}}],loop_function:function(){return s.length>0}}]}"max_time"in e&&(i=e.max_time),n.addEventListener("click",s)},f=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).jsPsychTarget=r.a.createRef(),a.play=a.play.bind(Object(c.a)(a)),a.state={disabled:!1},a}return Object(l.a)(n,[{key:"play",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({disabled:!0}),h(this.props.category,this.props.default_time)}},{key:"render",value:function(){var e=m()("pyramidy-categorie",{"pyramidy-categorie-disabled":this.state.disabled,"pyramidy-categorie-playing":this.props.playing});return r.a.createElement("div",{id:"pyramidy-categorie-"+this.props.order,className:e,ref:this.jsPsychTarget,style:this.props.style,onClick:this.play},r.a.createElement("span",null,this.props.displayName))}}]),n}(a.Component);f.defaultProps={disabled:!1,playing:!1,displayName:"None",fullName:"None"};var g=f,v=n(22),b=n.n(v),E=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).mainFrame=r.a.createRef(),a.state={categories:e.categories,default_time:e.default_time},a}return Object(l.a)(n,[{key:"findHeigth",value:function(e){var t=b.a.parse("1/2 * x^2 + 1/2 * x - "+e+" = 0");return Math.ceil(t.solveFor("x")[1].valueOf())}},{key:"getGridCss",value:function(){var e=this.findHeigth(this.state.categories.length),t={rows:e,cols:2*e};return{gridTemplateColumns:((100/t.cols).toString()+"% ").repeat(t.cols),gridTemplateRows:((100/t.rows).toString()+"% ").repeat(t.rows)}}},{key:"findCutoffs",value:function(e){for(var t=[],n=0;n<e;n++)0===t.length?t.push(1):t.push(t[t.length-1]+n);return t}},{key:"calculateElemsGridCss",value:function(e){var t=this.findHeigth(this.state.categories.length),n=this.findCutoffs(t),a=[];return n.forEach((function(n,r){for(var i=t-r,s=0;s<r+1&&!(n+s>e.length);s++)a.push({gridColumnStart:i+2*s,gridColumnEnd:"span 2",gridRowStart:r+1})})),a}},{key:"render",value:function(){var e=this,t=this.calculateElemsGridCss(this.props.categories);return r.a.createElement("div",{className:"pyramidy-main",style:this.getGridCss()},this.state.categories.map((function(n,a){return r.a.createElement(g,{style:t[a],key:a,order:a,displayName:n.displayName,fullName:n.fullName,category:n,default_time:e.props.default_time})})))}}]),n}(a.Component),_=n(23),j=n.n(_),k=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).input=r.a.createRef(),a.loadData=a.loadData.bind(Object(c.a)(a)),a.state={categories:null},a}return Object(l.a)(n,[{key:"loadData",value:function(e){e.preventDefault();var t=this.input.current.files[0],n=new FileReader,a=this;n.onload=function(){var t=n.result;try{var r=j.a.safeLoad(t),i=60;"max_time"in r&&(i=parseInt(r.max_time)),a.setState({categories:r.categories,default_time:i})}catch(e){alert("Oups! there was a problem with your file, check syntax")}},n.readAsText(t)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App",id:"app-container"},r.a.createElement("div",{id:"pyramidy-selector",style:{display:null===this.state.categories?"block":"none"}},r.a.createElement("label",{htmlFor:"source"},"S\xe9lectionnez votre jeu"),r.a.createElement("br",null),r.a.createElement("input",{type:"file",id:"source",name:"source",accept:".txt,.yaml,.yml",ref:this.input,onChange:this.loadData})),null===e.state.categories?"":r.a.createElement(E,{categories:e.state.categories,default_time:e.state.default_time}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement("main",null,r.a.createElement("header",null,r.a.createElement("h3",null,"EZ-Pyramidy"),r.a.createElement("h4",null,"Le syst\xe8me de jeu Pyramide FACILE \xe0 utiliser")),r.a.createElement("section",null,r.a.createElement(k,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[25,1,2]]]);
//# sourceMappingURL=main.d252fae1.chunk.js.map